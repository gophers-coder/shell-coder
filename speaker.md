# 演讲稿

大家好，这期我们来讲下 shell 脚本。shell 脚本一般不太会在出现招聘要求中，但是却是考察一个后端工程师服务端功底的一个重要技能。

所以专门出这样一期内容，讲述 shell 脚本，希望能提高大家编写脚本的效率。

另外我们的要求并不需要大家把 shell 脚本的能力提到到非常精通的地步，因为 shell 脚本的语法实在是太多了。每个命令都存在各种各样

的参数，不同的参数又有不同的表现形式。之需要能提高大家的效率即可。

另外 shell 脚本一般都是用来编写一些辅助功能，如果你想编写复杂的功能，建议你最好的方式，是选择一门自己上手的编程语言实现。

所以，shell 脚本的适用场景是一些较为简单的辅助功能。

本期的主要的内容安排包括：

- 变量
- 参数
- 函数
- 运算
- 流程
- 循环
- 文本处理

另外再补充一个  Makefile 用来编译、构建工程的工具。


## 1: 第一节

好，下面开始第一小节：参数，即参数相关

首先我们来看一下，一个标准的 shell 脚本的包含哪些内容：

- 指定 shell 
- 注释
- 必要的输出
- 处理

那么 shell 脚本如何从命令行中读取参数：

- ${0} 表示 文件本身
- ${1} 表示 第一个参数
- ${#} 表示 参数的个数

如何编写注释：

- #
```text
:<<EOF

多行注释

EOF

```

如何执行：

bash params.sh

或者 

chmod +x params.sh
./params.sh 


总结：

## 2. 第二节

好，上一节我们讲了下一个 shell 脚本包含哪些内容：指定 shell 类型，注释，输出，处理，如何从命令行中读取参数。

如何获取参数，如何输出，如何带格式的输出。

这一节我们讲下变量：

变量：字符串：声明以及使用、长度、截取、拼接

## 3. 第三节

好，上一节我们讲来变量的操作，包括，变量的声明，求变量的长度，字符串的拼接，字符串的截取

这一节我们讲下输入:

之前的内容我们已经讲过输出：echo、printf。那如何从终端中读取输入呢？

核心关键字是：read

我们这边先看一个示例：bc

bc 进行运算：
根据我们的输入，可以完成一些运算操作，只有当我们输入 quit 之后，就退出了整个终端。

我们可以看到这是一个不断的等待用户输入的操作，只有输入特定的字符才能退出的操作。

我们这边就尽量的模拟这么一个动作。



## 4. 第四节

好，上一节我们讲了下如何从终端中读取输入。核心关键字是 read. 加上循环，能够不断的从终端中读取输入。

这一节我们讲下运算。当然根据不同的属性有不同的运算。比如算术运算：+，-，*，/，%

再比如关系运算：>=, <=,>,<,=,

再比如逻辑运算：&&， || ， !

当然 shell 这块呢还支持 字符串的运算：长度、是否空； 文件操作：是否是文件、是否是目录，是否可读、可写、可执行


好，我们具体来看下。


## 5. 第五节

好，上一节我们讲了运算：包括：算术运算、逻辑运算、文件、字符串等一些运算。

要注意这么几点：

- 一般都要结合判断语句
- 另外一个我们注意这些符号表示的含义即可

这一节我们讲下数组操作：

首先我们可以回顾下编程语言中的数组，或者 之前讲过 redis 中数组的操作：

- 求长度
- 变量
- 往数组里加内容

shell 脚本这边的数组呢，和这些操作差不多。

- （）
- +()
- index 
- for in 


## 6. 流程控制

好，上一节我们讲了下，shell 脚本中的数组：

数组的操作主要有这些：求长度、遍历、往数组内加元素、索引。大家其实可以看到和 编程语言中的基本上是相同的操作。所以说

我们学习。不要囿于语法，而应该专注那些语言特性。

这一节，我们来讲下流程控制。

照例，我们先回顾下流程控制在编程语言中有哪些？

- if .. else
- switch.. case
- for
- while


shell 中其实和这些也差不多：
- if then else fi
- case esac
- for do done
- while do done


## 7. 函数

好，上一节我们讲了下流程控制：主要是 for 循环，if ，case，while 等几个关键字。

其实和编程语言中差不多，这再一次提示我们，需要注意语言特性，而不是具体的语法。

这一节我们来讲下函数：

照例我们先回顾下编程语言中的函数：


- 关键字：python :def ; go: func
- 函数有输入参数
- 函数有返回值或者没有返回值
- 调用

同样，在 shell 中也是如此；

- 关键字：function
- ${1}
- ${#}
- ${?}

## 8. 第八节

好，上一节我们讲了下 函数的操作，主要包括函数的定义，参数的处理，以及返回值的处理。

这一节我们讲下文本处理：说到文本处理，我们能想到什么？

- 替换
- 搜索

- grep 搜索
- sed 替换

要处理文本操作：

- 需要注意 正则表达式
- 不同的参数表示的含义


## 9. 第九节

好，上一节我们讲来下文本的搜索动作，grep 根据不同的参数，完成不同目的的搜索，比如按正则表达式，忽略大小写，统计，多个条件搜索，反向搜索

除来搜索之外呢，还有一个重要的文本操作：替换。

在 Linux 中文本替换操作使用：sed 关键字

好，我们来看下具体的示例。

## 10. Makefile

上一节我们讲了下问题的替换操作。带大家基本上完成了基本的shell 脚本的编写。后续的内容呢，就需要靠大家不断的在日常工作学习中不断的

使用shell 脚本，这样呢就能不断的熟练起来。

这一节呢，我们来讲下 Makefile 的使用，这个和 shell 脚本的内容非常的类似，只不过 Makefile 是用来对大型项目进行编译、构建等动作。



